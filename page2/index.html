<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <script src="/SupercomputingKhepri/libs/plotly/plotly.min.js"></script> <link rel=stylesheet  href="/SupercomputingKhepri/libs/katex/katex.min.css"> <link rel=stylesheet  href="/SupercomputingKhepri/libs/highlight/github.min.css"> <link rel=stylesheet  href="/SupercomputingKhepri/css/franklin.css"> <link rel=stylesheet  href="/SupercomputingKhepri/css/tufte.css"> <link rel=stylesheet  href="/SupercomputingKhepri/css/latex.css"> <link rel=stylesheet  href="/SupercomputingKhepri/css/adjust.css"> <link rel=icon  href="/SupercomputingKhepri/assets/favicon.png"> <title>Julia for Parallel Processing</title> <div id=layout > <div id=menu > <ul> <li><a href="/SupercomputingKhepri/">Home</a> <li><a href="/SupercomputingKhepri/page1/">Introduction</a> <li><a href="/SupercomputingKhepri/page2/">Parallel Processing</a> <li><a href="/SupercomputingKhepri/page3/">Design Exploration</a> <li><a href="/SupercomputingKhepri/page4/">Optimization</a> <li><a href="/SupercomputingKhepri/page5/">Rendering</a> <li><a href="/SupercomputingKhepri/page6/">Conclusions</a> </ul> </div> <div id=main > <div class=franklin-content > <h1 id=julia_for_parallel_processing ><a href="#julia_for_parallel_processing" class=header-anchor >Julia for Parallel Processing</a></h1> <p><div class=franklin-toc ><ol><li><a href="#an_embarrassingly_parallel_problem">An Embarrassingly Parallel Problem</a><li><a href="#fairness">Fairness</a><li><a href="#speedup">Speedup</a><li><a href="#amdahls_law">Amdahl&#39;s Law</a></ol></div> </p> <h1></h1> <p>Before anything else, we decided to gain some experience in the use of Julia&#39;s parallel processing capabilities.</p> <p>Julia supports multi-threading and distributed computing. Multi-threading allows multiple tasks to run simultaneously on more than one thread or CPU core, sharing memory, while distributed computing runs multiple processes with separate memory spaces, possibly on different machines. Given that Khepri is not thread-safe, we were particularly interested in testing the distributed computing capabilities. These are provided by the <code>Distributed</code> standard library as well as external packages such as <code>MPI.jl</code> and <code>DistributedArrays.jl</code>.</p> <p>The <code>Distributed</code> approach is based on the idea that one <em>master</em> process launches a set of <em>slave</em> processes, called workers, using the <code>addprocs</code> function, to which it distributes units of work, waiting for their completion. Despite being part of the standard library, the <code>Distributed</code> module must be explicitly loaded on the master process to access the <code>addprocs</code> function. The module is automatically loaded on the worker processes.</p> <h3 id=an_embarrassingly_parallel_problem ><a href="#an_embarrassingly_parallel_problem" class=header-anchor >An Embarrassingly Parallel Problem</a></h3> <p>The first tests attempted to determine how the Julia language implementation scales across multiple cores. The following Julia program computes an approximation of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span> using the classical Monte Carlo approach of sampling points on a square that circumscribes a circle of radius <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span>. In that case, the area of the circle is <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi><mi>r</mi><mtext>²</mtext></mrow><annotation encoding="application/x-tex">\pi r²</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mord >²</span></span></span></span> while the area of the square is <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy=false >(</mo><mn>2</mn><mi>r</mi><mo stretchy=false >)</mo><mtext>²</mtext><mo>=</mo><mn>4</mn><mi>r</mi><mtext>²</mtext></mrow><annotation encoding="application/x-tex">(2r)²=4r²</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord >2</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mclose >)</span><span class=mord >²</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >4</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class=mord >²</span></span></span></span>. The ratio between these areas is <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>π</mi><mi>r</mi><mtext>²</mtext></mrow><mrow><mn>4</mn><mi>r</mi><mtext>²</mtext></mrow></mfrac><mo>=</mo><mfrac><mi>π</mi><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{\pi r²}{4r²}=\frac{\pi}{4}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.040392em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mtight">²</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mtight">²</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.040392em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, which means that, independently of the radius of the circle, a uniformly distributed sample of points over the square will have <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>π</mi><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{\pi}{4}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.040392em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> points inside the circle.</p> <p>Instead of computing the approximation to <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span> &#40;whose value we already know&#41;, we preferred to compute the absolute error.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Statistics

approx_pi(n) =
  <span class=hljs-keyword >let</span> count = <span class=hljs-number >0</span>
    <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:n
      count += (rand()^<span class=hljs-number >2</span> + rand()^<span class=hljs-number >2</span>) &lt;= <span class=hljs-number >1</span>
    <span class=hljs-keyword >end</span>
    abs(<span class=hljs-number >4</span>*count/n - <span class=hljs-literal >pi</span>)
  <span class=hljs-keyword >end</span></code></pre> <p>Given the just-in-time compilation strategy used by Julia, we decided to do some preliminary computations to force the compilation and only then a benchmark is started. The benchmark computes approximations to <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span> with a series of exponentially increasing number of iterations. We evaluate the time spent with <code>@timev</code>:</p> <pre><code class="julia hljs"><span class=hljs-comment ># Force compilation:</span>
approx_pi(<span class=hljs-number >100</span>)

<span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >10</span>
  println(<span class=hljs-string >&quot;approx_pi(<span class=hljs-subst >$(<span class=hljs-number >10</span>^i)</span>):&quot;</span>, <span class=hljs-meta >@timev</span> approx_pi(<span class=hljs-number >10</span>^i))
<span class=hljs-keyword >end</span></code></pre> <p>In order to run the code, we saved all of it in a file <code>ApproxPi.jl</code> and we created a Slurm <em>batch</em> file named <code>BatchPi.sh</code>, containing the following:</p> <pre><code class="bash hljs"><span class=hljs-meta >#!/bin/bash</span>

<span class=hljs-comment >#SBATCH --job-name=SeqPi</span>
<span class=hljs-comment >#SBATCH --time=2:00:00</span>
<span class=hljs-comment >#SBATCH --nodes=1</span>
<span class=hljs-comment >#SBATCH -p ...</span>
<span class=hljs-comment >#SBATCH -q ...</span>

time ./julia ApproxPi.jl</code></pre> <p>To launch the Slurm batch file, we simply used <code>sbatch BatchPi.sh</code>. The benchmark results are the following:</p> <div id=fdpmxy  style="width:600px;height:350px"></div> <script> var fig = {"layout":{"showlegend":true,"xaxis":{"showticklabels":true,"gridwidth":0.5,"tickvals":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"visible":true,"ticks":"inside","range":[0.73,10.27],"domain":[0.0,0.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Iterations","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["10^1","10^2","10^3","10^4","10^5","10^6","10^7","10^8","10^9","10^10"],"zeroline":false,"type":"log","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"y"},"paper_bgcolor":"rgba(255, 255, 255, 1.000)","annotations":[],"height":330,"margin":{"l":0,"b":20,"r":0,"t":20},"plot_bgcolor":"rgba(255, 255, 255, 1.000)","yaxis":{"showticklabels":true,"gridwidth":0.5,"tickvals":[0.0,20.0,40.0,60.0,80.0],"visible":true,"ticks":"inside","range":[-5.0,80.0],"domain":[1.0,1.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Time (s)","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["0","20","40","60","80"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"x"},"legend":{"borderwidth":1,"tracegroupgap":0,"font":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"title":{"font":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"text":""},"traceorder":"normal","x":0.07,"yanchor":"top","xanchor":"left","bordercolor":"rgba(0, 0, 0, 1.000)","bgcolor":"rgba(255, 255, 255, 1.000)","y":1.0},"width":640},"frames":[],"data":[{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"Single threaded","zmin":null,"legendgroup":"Single threaded","marker":{"symbol":"circle","color":"rgba(0, 154, 250, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(0, 154, 250, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[8.0e-6,3.0e-6,9.0e-6,7.4e-5,0.000754,0.007515,0.074811,0.749354,7.493605,75.014382],"type":"scatter"}]}; CONTAINER = document.getElementById('fdpmxy'); Plotly.newPlot(CONTAINER, fig.data, fig.layout) </script> <p>It is relevant to note that despite the apparent exponential growth, the scale is logarithmic and, thus, the computation time grows linearly with the number of iterations.</p> <p>The next step was to repeat the same computation but using parallel processing. To that end, we decided to use a slightly different <code>BatchPi.sh</code> Slurm batch file:</p> <pre><code class="bash hljs"><span class=hljs-meta >#!/bin/bash</span>

<span class=hljs-comment >#SBATCH --job-name=ParPi</span>
<span class=hljs-comment >#SBATCH --time=2:00:00</span>
<span class=hljs-comment >#SBATCH --nodes=1</span>
<span class=hljs-comment >#SBATCH -p ...</span>
<span class=hljs-comment >#SBATCH -q ...</span>

time ./julia ApproxPi.jl <span class=hljs-variable >$SLURM_NTASKS</span></code></pre> <p>Note that we provided the Julia program with the number of tasks that it can use, although we did not specify that number in the Slurm script. We did so simply because it was easier to provide that information on the <code>sbatch</code> call using, e.g., <code>sbatch --ntasks&#61;8 BatchPi.sh</code></p> <p>The next fragment of code demonstrates the creation of workers. We take the number of processes <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> that was passed as a command-line argument and we create <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >1</span></span></span></span> additional workers so that the master and the slaves use all available resources.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Distributed

addprocs(parse(<span class=hljs-built_in >Int</span>, <span class=hljs-literal >ARGS</span>[<span class=hljs-number >1</span>])-<span class=hljs-number >1</span>)</code></pre> <p>Despite the simplicity of the <code>addprocs</code> function, there is a lot going on behind the scenes. Immediately after its creation, each of the workers creates a TCP/IP connection, writes on standard output the corresponding host and port, and starts listening on that port. The master receives the output of each worker and completes the TCP/IP connection to each one. Then, it informs each worker of the connection point of all other workers, so that they can establish connections between themselves. To do this, each worker connects to all workers whose <em>id</em> is less than its own <em>id</em>.</p> <p>Given that all these connections require time to establish, we decided to measure its impact in time and allocated memory as the number of processes increases. The results are the following:</p> <div id=fdpknf  style="width:600px;height:350px"></div> <script> var fig = {"layout":{"paper_bgcolor":"rgba(255, 255, 255, 1.000)","height":330,"yaxis2":{"showticklabels":true,"gridwidth":0.5,"tickvals":[0.0,5.0,10.0,15.0,20.0,25.0,30.0,35.0],"visible":true,"ticks":"inside","range":[0.0,35.0],"domain":[1.0,1.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Memory (MiB)","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["0","5","10","15","20","25","30","35"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"x2"},"yaxis1":{"showticklabels":true,"gridwidth":0.5,"tickvals":[0.0,0.5,1.0,1.5,2.0,2.5],"visible":true,"ticks":"inside","range":[0.0,2.5],"domain":[1.0,1.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Time (s)","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["0.0","0.5","1.0","1.5","2.0","2.5"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"x1"},"annotations":[],"plot_bgcolor":"rgba(0, 0, 0, 0.000)","showlegend":true,"xaxis1":{"showticklabels":true,"gridwidth":0.5,"tickvals":[2.0,4.0,8.0,16.0,32.0,48.0,64.0,80.0,96.0],"visible":true,"ticks":"inside","range":[-0.8199999999999998,98.82],"domain":[0.0,0.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Processes","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["2","4","8","16","32","48","64","80","96"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"y1"},"legend":{"borderwidth":1,"tracegroupgap":0,"font":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"title":{"font":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"text":""},"traceorder":"normal","x":0.07,"yanchor":"top","xanchor":"left","bordercolor":"rgba(0, 0, 0, 1.000)","bgcolor":"rgba(255, 255, 255, 1.000)","y":1.0},"xaxis2":{"showticklabels":false,"gridwidth":0.5,"visible":true,"ticks":"inside","range":[-0.8199999999999998,98.82],"domain":[0.0,0.0],"linecolor":"rgba(0, 0, 0, 1.000)","showgrid":false,"title":"","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","zeroline":false,"type":"-","zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"y2"},"margin":{"l":0,"b":20,"r":0,"t":20},"width":640},"frames":[],"data":[{"xaxis":"x1","colorbar":{"title":""},"yaxis":"y1","x":[2.0,4.0,8.0,16.0,32.0,48.0,64.0,80.0,96.0],"showlegend":true,"mode":"markers","name":"Time","zmin":null,"legendgroup":"Time","marker":{"symbol":"circle","color":"rgba(0, 154, 250, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"y":[1.078188,1.205602,1.480043,1.379302,1.375842,1.691627,1.737718,1.843256,2.059247],"type":"scatter"},{"xaxis":"x1","colorbar":{"title":""},"yaxis":"y1","x":[2.0,96.0],"showlegend":false,"mode":"lines+markers","name":"","zmin":null,"legendgroup":"","marker":{"symbol":"circle","color":"rgba(0, 154, 250, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(0, 154, 250, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[1.2224176887170155,2.029080897588717],"type":"scatter"},{"xaxis":"x2","colorbar":{"title":""},"yaxis":"y2","x":[2.0,4.0,8.0,16.0,32.0,48.0,64.0,80.0,96.0],"showlegend":true,"mode":"lines+markers","name":"Memory","zmin":null,"legendgroup":"Memory","marker":{"symbol":"circle","color":"rgba(0, 128, 0, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(0, 128, 0, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[1.148,1.828,3.196,5.945,11.478,17.115,22.81,28.583,34.435],"type":"scatter"}]}; CONTAINER = document.getElementById('fdpknf'); Plotly.newPlot(CONTAINER, fig.data, fig.layout) </script> <p>This shows that using multiple processes entails an overhead with a fixed part of around one second and a variable part of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.01</mn></mrow><annotation encoding="application/x-tex">0.01</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >0</span><span class=mord >.</span><span class=mord >0</span><span class=mord >1</span></span></span></span> seconds per process.</p> <p>The following step was to divide the work among the workers. To that end, each one needs to know what it is supposed to compute, and this is another area where Julia shines. The macro <code>@everywhere</code> allows the master to make requests to all workers. In our case, we need each worker to define the function <code>approx_pi</code> that computes the <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span> approximation using the Monte Carlo method. To force Just-In-Time compilation on each worker, we also request a corresponding function call.</p> <pre><code class="julia hljs"><span class=hljs-meta >@everywhere</span> approx_pi(n) =
  <span class=hljs-keyword >let</span> count = <span class=hljs-number >0</span>
    <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:n
      count += (rand()^<span class=hljs-number >2</span> + rand()^<span class=hljs-number >2</span>) &lt;= <span class=hljs-number >1</span>
    <span class=hljs-keyword >end</span>
    abs(<span class=hljs-number >4</span>*count/n - <span class=hljs-literal >pi</span>)
  <span class=hljs-keyword >end</span>

<span class=hljs-comment ># Force compilation:</span>
<span class=hljs-meta >@everywhere</span> approx_pi(<span class=hljs-number >100</span>)</code></pre> <p>Finally, to compute the approximation, we take advantage of Julia&#39;s higher-level parallel operations, namely, <code>pmap</code>, which maps a function over an array, but arranging for the applications to be done in parallel by distributing the array values among the workers. We defined the <code>p_approxi_pi</code> function that helps the distribution by dividing the intended number of iterations between the workers and then computing the <code>mean</code> of the results that came from the workers.</p> <pre><code class="julia hljs">p_approx_pi(n) =
  mean(pmap(n-&gt;approx_pi(n),
            [n/nworkers() <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:nworkers()]))</code></pre> <p>To evaluate the effectiveness of this strategy, we experimented a series of computations using an exponentially larger number of iterations, using an increasingly larger number of parallel processes.</p> <pre><code class="julia hljs"><span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >10</span>
  println(<span class=hljs-string >&quot;p_approx_pi(<span class=hljs-subst >$(<span class=hljs-number >10</span>^i)</span>):&quot;</span>, <span class=hljs-meta >@timev</span> p_approx_pi(<span class=hljs-number >10</span>^i))
<span class=hljs-keyword >end</span></code></pre> <p>Note that, with this scheme, when we use two processes, we are in fact using just one worker, as the other one is just managing the distribution of work and collection of results. In the next plot, we also superimpose the results for the single-threaded case.</p> <div id=fdpfok  style="width:600px;height:350px"></div> <script> var fig = {"layout":{"showlegend":true,"xaxis":{"showticklabels":true,"gridwidth":0.5,"tickvals":[100.0,10000.0,1.0e6,1.0e8,1.0e10],"visible":true,"ticks":"inside","range":[0.73,10.27],"domain":[0.0,0.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Iterations","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["10^2","10^4","10^6","10^8","10^10"],"zeroline":false,"type":"log","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"y"},"paper_bgcolor":"rgba(255, 255, 255, 1.000)","annotations":[],"height":330,"margin":{"l":0,"b":20,"r":0,"t":20},"plot_bgcolor":"rgba(255, 255, 255, 1.000)","yaxis":{"showticklabels":true,"gridwidth":0.5,"tickvals":[0.0,20.0,40.0,60.0,80.0],"visible":true,"ticks":"inside","range":[0.0,80.0],"domain":[1.0,1.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Time (s)","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["0","20","40","60","80"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"x"},"legend":{"borderwidth":1,"tracegroupgap":0,"font":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"title":{"font":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"text":"# Processes"},"traceorder":"normal","x":0.07,"yanchor":"top","xanchor":"left","bordercolor":"rgba(0, 0, 0, 1.000)","bgcolor":"rgba(255, 255, 255, 1.000)","y":1.0},"width":640},"frames":[],"data":[{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"1","zmin":null,"legendgroup":"1","marker":{"symbol":"circle","color":"rgba(0, 154, 250, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(0, 154, 250, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[8.0e-6,3.0e-6,9.0e-6,7.4e-5,0.000754,0.007515,0.074811,0.749354,7.493605,75.014382],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"2","zmin":null,"legendgroup":"2","marker":{"symbol":"square","color":"rgba(227, 111, 71, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(227, 111, 71, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[0.856018,0.000391,0.000182,0.000178,0.000856,0.007842,0.080284,0.776677,8.230821,77.264732],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"4","zmin":null,"legendgroup":"4","marker":{"symbol":"diamond","color":"rgba(62, 164, 78, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(62, 164, 78, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[0.847039,0.003264,0.000225,0.000153,0.000414,0.002873,0.026081,0.257399,2.7517,26.270629],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"8","zmin":null,"legendgroup":"8","marker":{"symbol":"triangle-up","color":"rgba(195, 113, 210, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(195, 113, 210, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[0.854364,0.001206,0.00041,0.00031,0.000461,0.001537,0.011333,0.110858,1.147449,11.570491],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"16","zmin":null,"legendgroup":"16","marker":{"symbol":"triangle-down","color":"rgba(172, 142, 24, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(172, 142, 24, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[1.089487,0.001074,0.000708,0.00069,0.000682,0.001329,0.006278,0.05676,0.562188,5.599749],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"32","zmin":null,"legendgroup":"32","marker":{"symbol":"cross","color":"rgba(0, 170, 174, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(0, 170, 174, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[0.896568,0.002596,0.001506,0.001533,0.001501,0.001477,0.003643,0.026056,0.251256,2.518703],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"48","zmin":null,"legendgroup":"48","marker":{"symbol":"x","color":"rgba(237, 94, 147, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(237, 94, 147, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[0.988248,0.003823,0.002412,0.002424,0.002398,0.002382,0.003472,0.01811,0.169489,1.745023],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"64","zmin":null,"legendgroup":"64","marker":{"symbol":"pentagon","color":"rgba(198, 130, 37, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(198, 130, 37, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[0.95072,0.004167,0.003167,0.003195,0.003153,0.003184,0.00351,0.014892,0.130532,1.30631],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"80","zmin":null,"legendgroup":"80","marker":{"symbol":"hexagon","color":"rgba(0, 169, 141, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(0, 169, 141, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[0.960334,0.005236,0.00412,0.004182,0.00417,0.004118,0.004086,0.017604,0.15506,1.173751],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[10.0,100.0,1000.0,10000.0,100000.0,1.0e6,1.0e7,1.0e8,1.0e9,1.0e10],"showlegend":true,"mode":"lines+markers","name":"96","zmin":null,"legendgroup":"96","marker":{"symbol":"octagon","color":"rgba(142, 151, 30, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(142, 151, 30, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[0.947769,0.006393,0.00502,0.005109,0.064166,0.004894,0.004888,0.013053,0.103313,0.954526],"type":"scatter"}]}; CONTAINER = document.getElementById('fdpfok'); Plotly.newPlot(CONTAINER, fig.data, fig.layout) </script> <p>Results show that two processes, i.e., having just one worker doing all the work, is very similar to the single-threaded case. The performance impact is only 2.6&#37;. However, it is not all good news, as the results also show that parallelization only pays off when the number of iterations reaches <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><annotation encoding="application/x-tex">10^8</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8141079999999999em;vertical-align:0em;"></span><span class=mord >1</span><span class=mord ><span class=mord >0</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span>.</p> <p>On the other hand, when we compare the time it takes the entire experiment to complete for a given number of processes, the results are a bit surprising:</p> <div id=fdpcab  style="width:600px;height:350px"></div> <script> var fig = {"layout":{"showlegend":false,"xaxis":{"showticklabels":true,"gridwidth":0.5,"tickvals":[2.0,4.0,8.0,16.0,32.0,48.0,64.0,80.0,96.0],"visible":true,"ticks":"inside","range":[-0.8199999999999998,98.82],"domain":[0.0,0.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Processes","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["2","4","8","16","32","48","64","80","96"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"y"},"paper_bgcolor":"rgba(255, 255, 255, 1.000)","annotations":[],"height":330,"margin":{"l":0,"b":20,"r":0,"t":20},"plot_bgcolor":"rgba(255, 255, 255, 1.000)","yaxis":{"showticklabels":true,"gridwidth":0.5,"tickvals":[0.0,30.0,60.0,90.0,120.0,150.0,180.0],"visible":true,"ticks":"inside","range":[0.0,180.0],"domain":[1.0,1.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Time (s)","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["0","30","60","90","120","150","180"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"x"},"width":640},"frames":[],"data":[{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[2.0,4.0,8.0,16.0,32.0,48.0,64.0,80.0,96.0],"showlegend":true,"mode":"lines+markers","name":"2","zmin":null,"legendgroup":"2","marker":{"symbol":"circle","color":"rgba(0, 154, 250, 1.000)","line":{"color":"rgba(0, 0, 0, 1.000)","width":1},"size":8},"zmax":null,"line":{"color":"rgba(0, 154, 250, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[174.818,117.889,101.636,96.311,95.354,96.136,95.539,96.951,98.881],"type":"scatter"}]}; CONTAINER = document.getElementById('fdpcab'); Plotly.newPlot(CONTAINER, fig.data, fig.layout) </script> <p>Now, we see that despite the considerable gains obtained, almost halving the time needed, it only pays off to use up to 16 processes.</p> <h3 id=fairness ><a href="#fairness" class=header-anchor >Fairness</a></h3> <p>Our guess for the lack of speedup after 16 processes is that the time spent starting processes and managing them nullifies the gains of the parallelization. Another hypothesis is that, despite the number of workers created, Julia is not taking advantage of them because it does not fairly distribute the work among them. To refute &#40;or confirm&#41; this hypothesis, we decided to make a different test.</p> <p>The goal of this test was to distribute identical work units among the workers and collect the number of units that were processed by each worker. To that end, we used the following program:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Distributed
addprocs(parse(<span class=hljs-built_in >Int</span>, <span class=hljs-literal >ARGS</span>[<span class=hljs-number >1</span>])-<span class=hljs-number >1</span>)

<span class=hljs-meta >@everywhere</span> work(x) = (sleep(<span class=hljs-number >0.01</span>); myid())
res = <span class=hljs-meta >@time</span> pmap(work, <span class=hljs-number >1</span>:<span class=hljs-number >2000</span>)</code></pre> <p>Note that the work unit of each process is just a quick <code>sleep</code>. Each process then returns its own <em>id</em>. The master, besides repeatedly sending elements of the range <code>1:2000</code> to the available workers, collects the results. This means that the range ends up being converted into an array of process <em>id</em>s, where each <em>id</em> represents the process that handled that work unit.</p> <p>After the range is exhausted, the array of <em>id</em>s is processed to count the number of times each <em>id</em> showed up. If the distribution is fair, all processes will have more or less the same number of occurrences in the array, meaning that all of them had to process a similar number of work units.</p> <pre><code class="julia hljs">distr = <span class=hljs-built_in >Dict</span>([i=&gt;<span class=hljs-number >0</span> <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> workers()])
<span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> res
 distr[i]+=<span class=hljs-number >1</span>
<span class=hljs-keyword >end</span></code></pre> <p>Finally, for each process <em>id</em> we print the number of times it occurred in the array, i.e., the number of work units that it had to process.</p> <pre><code class="julia hljs"><span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> workers()
  println(<span class=hljs-string >&quot;<span class=hljs-subst >$(i)</span>=&gt;<span class=hljs-subst >$(distr[i])</span>&quot;</span>)
<span class=hljs-keyword >end</span></code></pre> <p>In the following bar chart, we plot that number for each process. Their <em>id</em>s are presented on the horizontal axis.</p> UndefRefError: access to undefined reference <p>Note the fairly regular number of units of work that is done by each worker. Similar plots could be made for different amounts of processes. The next one shows the same statistics but using only 32 processors:</p> UndefRefError: access to undefined reference <p>Again, we see a relatively fair distribution of work. The same behavior is seen in the following case, using just four processes:</p> UndefRefError: access to undefined reference <p>The following bar chart condenses the entire information in a single plot, showing the division of labor for different numbers of workers. As before, remember that the number of workers is one less than the number of processes. That means that, e.g., for 2 processes, there is just one worker doing all the heavy lifting.</p> UndefRefError: access to undefined reference <p>As is visible, the work was uniformly distributed among the workers, independently of the number of workers being used.</p> <h3 id=speedup ><a href="#speedup" class=header-anchor >Speedup</a></h3> <p>The following bar chart reveals another interesting statistic that confirms our previous hypothesis regarding the time spent managing the workers <em>vs</em> the time doing actual work. Here we measured the time needed to launch the workers &#40;the <code>addprocs</code> operation&#41; and the total time needed to process all work items.</p> UndefRefError: access to undefined reference <p>Despite the enormous reduction in the time spent doing actual work &#40;that goes from 22.5 seconds using just one worker to 0.42 seconds using 96 workers, i.e., <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>54</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{54}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.190108em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> of the original time&#41;, we can see that the actual benefits become marginal when we use more than 32 processes and the situation gets actually worse with 96 processes, as the time to launch all of them dominates the entire computation. With that number of processors, the total time goes from 23.9 seconds to 2.55, i.e., <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>10</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{10}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.190108em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> of the original total time. The following plot illustrates the difference between the speedups considering only the time the workers spend doing useful work and the corresponding speedups when we consider the total time.</p> <div id=fdpbri  style="width:600px;height:350px"></div> <script> var fig = {"layout":{"showlegend":true,"xaxis":{"showticklabels":true,"gridwidth":0.5,"tickvals":[0.5,1.5,2.5,3.5,4.5,5.5,6.5,7.5,8.5],"visible":true,"ticks":"inside","range":[0.26,8.74],"domain":[0.0,0.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"# Processes","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["2","4","8","16","32","48","64","80","96"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"y"},"paper_bgcolor":"rgba(255, 255, 255, 1.000)","annotations":[],"height":330,"margin":{"l":0,"b":20,"r":0,"t":20},"plot_bgcolor":"rgba(255, 255, 255, 1.000)","yaxis":{"showticklabels":true,"gridwidth":0.5,"tickvals":[0.0,10.0,20.0,30.0,40.0,50.0],"visible":true,"ticks":"inside","range":[-0.5718447652401697,54.96667027324583],"domain":[1.0,1.0],"tickmode":"array","linecolor":"rgba(0, 0, 0, 1.000)","showgrid":true,"title":"Speedup","mirror":false,"tickangle":0,"showline":true,"gridcolor":"rgba(0, 0, 0, 0.100)","titlefont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"tickcolor":"rgb(0, 0, 0)","ticktext":["0","10","20","30","40","50"],"zeroline":false,"type":"-","tickfont":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"zerolinecolor":"rgba(0, 0, 0, 1.000)","anchor":"x"},"legend":{"borderwidth":1,"tracegroupgap":0,"font":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":11},"title":{"font":{"color":"rgba(0, 0, 0, 1.000)","family":"sans-serif","size":15},"text":""},"traceorder":"normal","x":0.07,"yanchor":"top","xanchor":"left","bordercolor":"rgba(0, 0, 0, 1.000)","bgcolor":"rgba(255, 255, 255, 1.000)","y":1.0},"width":640},"frames":[],"data":[{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[0.5,1.5,2.5,3.5,4.5,5.5,6.5,7.5,8.5],"showlegend":true,"mode":"lines","name":"Working Time","zmin":null,"legendgroup":"Working Time","zmax":null,"line":{"color":"rgba(0, 154, 250, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[1.0,2.96663142834129,6.712170183319315,13.572329122718983,24.940877876639757,33.73877191193844,40.80205974343865,48.49108758985675,53.39482550800566],"type":"scatter"},{"xaxis":"x","colorbar":{"title":""},"yaxis":"y","x":[0.5,1.5,2.5,3.5,4.5,5.5,6.5,7.5,8.5],"showlegend":true,"mode":"lines","name":"Total Time","zmin":null,"legendgroup":"Total Time","zmax":null,"line":{"color":"rgba(227, 111, 71, 1.000)","width":1,"dash":"solid","shape":"linear"},"y":[1.0,2.615462632074535,5.1567303658589685,7.015372794218998,9.02360265129496,9.22858278196794,9.694469346103157,9.937993037033346,9.377645394786361],"type":"scatter"}]}; CONTAINER = document.getElementById('fdpbri'); Plotly.newPlot(CONTAINER, fig.data, fig.layout) </script> <h3 id=amdahls_law ><a href="#amdahls_law" class=header-anchor >Amdahl&#39;s Law</a></h3> <p>This phenomenon is an excellent example of Amdahl&#39;s law, presented by 1967 by Gene Amdahl, which establishes the theoretical limits of the achievable speedup when only a fraction of a process can be parallelized.</p> <p>To derive the law, let us call <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> the total duration of a process that can be divided into two parts: <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><msub><mi>T</mi><mi>s</mi></msub><mo>+</mo><msub><mi>T</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">T=T_s+T_p</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.83333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.969438em;vertical-align:-0.286108em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>, where <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">T_s</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.83333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> must be executed sequentially and, thus, cannot benefit from parallelization, and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">T_p</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.969438em;vertical-align:-0.286108em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> can be parallelized. Assuming that the parallelizable part is a fraction <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mfrac><msub><mi>T</mi><mi>p</mi></msub><mi>T</mi></mfrac></mrow><annotation encoding="application/x-tex">p=\frac{T_p}{T}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.330651em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.985651em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.50732em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.16454285714285716em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class=pstrut  style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, then <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>p</mi></msub><mo>=</mo><mi>p</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">T_p=pT</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.969438em;vertical-align:-0.286108em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.286108em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>s</mi></msub><mo>=</mo><mi>T</mi><mo>−</mo><msub><mi>T</mi><mi>p</mi></msub><mo>=</mo><mi>T</mi><mo>−</mo><mi>p</mi><mi>T</mi><mo>=</mo><mo stretchy=false >(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=false >)</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">T_s=T-T_p=T-pT=(1-p)T</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.83333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.969438em;vertical-align:-0.286108em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.286108em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class=mclose >)</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>. Therefore, we have <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mo stretchy=false >(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=false >)</mo><mi>T</mi><mo>+</mo><mi>p</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">T=(1-p)T + pT</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class=mclose >)</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>.</p> <p>After parallelization using <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> processors, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>p</mi></msub><mo>=</mo><mi>p</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">T_p=pT</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.969438em;vertical-align:-0.286108em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.286108em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> becomes <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>T</mi><mi>p</mi><mo mathvariant=normal  lspace=0em  rspace=0em >′</mo></msubsup><mo>=</mo><mfrac><msub><mi>T</mi><mi>p</mi></msub><mi>n</mi></mfrac><mo>=</mo><mfrac><mrow><mi>p</mi><mi>T</mi></mrow><mi>n</mi></mfrac></mrow><annotation encoding="application/x-tex">T&#x27;_p=\frac{T_p}{n}=\frac{pT}{n}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.135em;vertical-align:-0.383108em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.383108em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.330651em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.985651em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.50732em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.16454285714285716em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class=pstrut  style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.269439em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.924439em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>. Then, the total time becomes <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mo mathvariant=normal  lspace=0em  rspace=0em >′</mo></msup><mo>=</mo><msub><mi>T</mi><mi>s</mi></msub><mo>+</mo><msubsup><mi>T</mi><mi>p</mi><mo mathvariant=normal  lspace=0em  rspace=0em >′</mo></msubsup><mo>=</mo><mo stretchy=false >(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=false >)</mo><mi>T</mi><mo>+</mo><mfrac><mi>p</mi><mi>n</mi></mfrac><mi>T</mi></mrow><annotation encoding="application/x-tex">T&#x27;=T_s+T&#x27;_p =(1-p)T+\frac{p}{n}T</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.751892em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.83333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1.135em;vertical-align:-0.383108em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.751892em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.383108em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class=mclose >)</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1.0925em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>. The speedup, which is defined as the ratio between the duration of the non-parallelized version and the duration of the parallelized one, becomes <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mfrac><mi>T</mi><msup><mi>T</mi><mo mathvariant=normal  lspace=0em  rspace=0em >′</mo></msup></mfrac><mo>=</mo><mfrac><mi>T</mi><mrow><mo stretchy=false >(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=false >)</mo><mi>T</mi><mo>+</mo><mfrac><mi>p</mi><mi>n</mi></mfrac><mi>T</mi></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>−</mo><mi>p</mi><mo>+</mo><mfrac><mi>p</mi><mi>n</mi></mfrac></mrow></mfrac></mrow><annotation encoding="application/x-tex">S=\frac{T}{T&#x27;}=\frac{T}{(1-p)T+\frac{p}{n}T}=\frac{1}{1-p+\frac{p}{n}}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.217331em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class=pstrut  style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.462081em;vertical-align:-0.58975em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.872331em;"><span style="top:-2.65105em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.7699285714285715em;"><span style="top:-2.656em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.2255000000000003em;"><span class=pstrut  style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.4623857142857144em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.58975em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.434858em;vertical-align:-0.58975em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.845108em;"><span style="top:-2.65105em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">p</span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.7699285714285715em;"><span style="top:-2.656em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.2255000000000003em;"><span class=pstrut  style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.4623857142857144em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.58975em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>. Imagining that the number of processors is unlimited, the maximum theoretical speedup becomes </p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><munder><mo><mi>lim</mi><mo>⁡</mo></mo><mrow><mi>n</mi><mo>→</mo><mi mathvariant=normal >∞</mi></mrow></munder><mi>S</mi><mo>=</mo><munder><mo><mi>lim</mi><mo>⁡</mo></mo><mrow><mi>n</mi><mo>→</mo><mi mathvariant=normal >∞</mi></mrow></munder><mfrac><mn>1</mn><mrow><mn>1</mn><mo>−</mo><mi>p</mi><mo>+</mo><mfrac><mi>p</mi><mi>n</mi></mfrac></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\lim_{n\to\infty} S=\lim_{n\to\infty} \frac{1}{1-p+\frac{p}{n}}=\frac{1}{1-p}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.39444em;vertical-align:-0.7em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.69444em;"><span style="top:-2.4em;margin-left:0em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span><span class=mop >lim</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.7em;"><span></span></span></span></span></span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:2.35244em;vertical-align:-1.0310000000000001em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.69444em;"><span style="top:-2.4em;margin-left:0em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span><span class=mop >lim</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.7em;"><span></span></span></span></span></span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.32144em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal">p</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >1</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:1.0310000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:2.20188em;vertical-align:-0.8804400000000001em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.32144em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >1</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal">p</span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >1</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> <p>In our problem, the sequential time using only one worker took 22.5 seconds, of which 1.4 are wasted launching the additional process. This means that the parallelizable part is a fraction <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mfrac><mrow><mn>22.5</mn><mo>−</mo><mn>1.4</mn></mrow><mn>22.5</mn></mfrac><mo>=</mo><mn>0.938</mn></mrow><annotation encoding="application/x-tex">p=\frac{22.5-1.4}{22.5}=0.938</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.190108em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">2</span><span class="mord mtight">.</span><span class="mord mtight">5</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">2</span><span class="mord mtight">.</span><span class="mord mtight">5</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">.</span><span class="mord mtight">4</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >0</span><span class=mord >.</span><span class=mord >9</span><span class=mord >3</span><span class=mord >8</span></span></span></span>. In this case, the maximum speedup would not exceed 16, a far cry from the 10 that we obtained in the best case. In practice, the situation is even worse, as <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">T_s</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.83333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is not constant and, in fact, increases with <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>. For example, using 96 processors, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">T_s</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.83333em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is already <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.13</mn></mrow><annotation encoding="application/x-tex">2.13</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >2</span><span class=mord >.</span><span class=mord >1</span><span class=mord >3</span></span></span></span>, which gives a maximum speedup of 13.5. Obviously, our example has other parts that cannot be parallelized.</p> <h1></h1> <p><a href="/SupercomputingKhepri/page1/">&lt;&lt; Previous Chapter</a></p> <p><a href="/SupercomputingKhepri/page3/">Next Chapter &gt;&gt;</a></p> <div class=page-foot > <div class=copyright > &copy; António Menezes Leitão. Last modified: April 07, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div>